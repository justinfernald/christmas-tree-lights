{"version":3,"file":"worker-DKWDvSgI.js","sources":["../src/visualizer/worker.ts"],"sourcesContent":["import { LocalRunner } from '../runners/LocalRunner';\nimport { AppToWorkerMessageTypes, WorkerMessage } from './messages';\n\nfunction main() {\n  let runner: LocalRunner | undefined;\n\n  self.addEventListener(\n    'message',\n    (e: MessageEvent<WorkerMessage & { type: AppToWorkerMessageTypes }>) => {\n      const { type, data } = e.data;\n\n      if (type === 'code') {\n        const { code } = data;\n\n        const module = eval(code + '\\nself.exports = exports;');\n        runner = module.runner;\n      }\n\n      if (type === 'play') {\n        if (!runner) return;\n        runner.play();\n      }\n\n      if (type === 'pause') {\n        if (!runner) return;\n        runner.pause();\n      }\n\n      if (type === 'reset') {\n        if (!runner) return;\n        runner.reset();\n      }\n\n      if (type === 'step') {\n        if (!runner) return;\n        runner.step();\n      }\n\n      // console.log(type, data);\n\n      postMessage({\n        type: 'confirmation',\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        data: { type, messageId: (data as any).messageId },\n      });\n    },\n  );\n\n  postMessage({ type: 'ready' });\n}\n\nmain();\n"],"names":[],"mappings":"yBAGA,SAAS,MAAO,CACV,IAAA,OAEC,KAAA,iBACH,UACC,GAAuE,CACtE,KAAM,CAAE,KAAM,IAAK,EAAI,EAAE,KAEzB,GAAI,OAAS,OAAQ,CACb,KAAA,CAAE,MAAS,KAEX,OAAS,KAAK,KAAO;AAAA,wBAA2B,EACtD,OAAS,OAAO,MAAA,CAGlB,GAAI,OAAS,OAAQ,CACnB,GAAI,CAAC,OAAQ,OACb,OAAO,KAAK,CAAA,CAGd,GAAI,OAAS,QAAS,CACpB,GAAI,CAAC,OAAQ,OACb,OAAO,MAAM,CAAA,CAGf,GAAI,OAAS,QAAS,CACpB,GAAI,CAAC,OAAQ,OACb,OAAO,MAAM,CAAA,CAGf,GAAI,OAAS,OAAQ,CACnB,GAAI,CAAC,OAAQ,OACb,OAAO,KAAK,CAAA,CAKF,YAAA,CACV,KAAM,eAEN,KAAM,CAAE,KAAM,UAAY,KAAa,SAAU,CAAA,CAClD,CAAA,CAEL,EAEY,YAAA,CAAE,KAAM,QAAS,CAC/B,CAEA,KAAK"}