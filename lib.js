"use strict";var T=Object.defineProperty;var E=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var c=(e,t,s)=>E(e,typeof t!="symbol"?t+"":t,s);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});class h{constructor(t,s,n){this.x=t,this.y=s,this.z=n}static fromObject(t){return new h(t.x,t.y,t.z)}static fromTuple(t){return new h(t[0],t[1],t[2])}static zero(){return new h(0,0,0)}static forward(){return new h(0,0,1)}static backward(){return new h(0,0,-1)}static up(){return new h(0,1,0)}static down(){return new h(0,-1,0)}static left(){return new h(-1,0,0)}static right(){return new h(1,0,0)}static randomOnSphere(t){const s=Math.random(),n=Math.random(),i=2*Math.PI*s,r=Math.acos(2*n-1),x=t*Math.sin(r)*Math.cos(i),y=t*Math.sin(r)*Math.sin(i),z=t*Math.cos(r);return new h(x,y,z)}static randomInSphere(t){const s=Math.random(),n=Math.random(),i=2*Math.PI*s,r=Math.acos(2*n-1),x=t*Math.cbrt(Math.random()),y=x*Math.sin(r)*Math.cos(i),z=x*Math.sin(r)*Math.sin(i),a=x*Math.cos(r);return new h(y,z,a)}clone(){return new h(this.x,this.y,this.z)}add(t){return new h(this.x+t.x,this.y+t.y,this.z+t.z)}sub(t){return new h(this.x-t.x,this.y-t.y,this.z-t.z)}mult(t){return new h(this.x*t.x,this.y*t.y,this.z*t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){const s=this.y*t.z-this.z*t.y,n=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return new h(s,n,i)}scale(t){return new h(this.x*t,this.y*t,this.z*t)}limitLength(t=1){return this.length<=t?this.clone():this.asLength(t)}asLength(t){return this.normalized.scale(t)}distanceTo(t){return Math.hypot(this.x-t.x,this.y-t.y,this.z-t.z)}get squaredMagnitude(){return this.x**2+this.y**2+this.z**2}get length(){return Math.hypot(this.x,this.y,this.z)}get normalized(){const t=this.length;return new h(this.x/t,this.y/t,this.z/t)}get asTuple(){return[this.x,this.y,this.z]}get asObject(){return{x:this.x,y:this.y,z:this.z}}negate(){return new h(-this.x,-this.y,-this.z)}rotateXYZ(t){const{x:s,y:n,z:i}=t,r=Math.cos(s),x=Math.sin(s),y=Math.cos(n),z=Math.sin(n),a=Math.cos(i),d=Math.sin(i),w=this.x*(y*a)+this.y*(r*d+x*z*a)+this.z*(x*d-r*z*a),f=this.x*(-y*d)+this.y*(r*a-x*z*d)+this.z*(x*a+r*z*d),Z=this.x*z+this.y*(-x*y)+this.z*(r*y);return new h(w,f,Z)}rotateXY(t){const s=Math.cos(t),n=Math.sin(t),i=this.x*s-this.y*n,r=this.x*n+this.y*s;return new h(i,r,this.z)}rotateYZ(t){const s=Math.cos(t),n=Math.sin(t),i=this.y*s-this.z*n,r=this.y*n+this.z*s;return new h(this.x,i,r)}rotateZX(t){const s=Math.cos(t),n=Math.sin(t),i=this.z*s-this.x*n,r=this.z*n+this.x*s;return new h(r,this.y,i)}rotateAroundAxis(t,s){const n=Math.cos(s),i=Math.sin(s),r=this.dot(t),x=t.y*this.z-t.z*this.y,y=t.z*this.x-t.x*this.z,z=t.x*this.y-t.y*this.x,a=this.x*n+x*i+r*(1-n)*t.x,d=this.y*n+y*i+r*(1-n)*t.y,w=this.z*n+z*i+r*(1-n)*t.z;return new h(a,d,w)}angleBetween(t){const s=this.dot(t),n=this.length*t.length;return Math.acos(s/n)}projectOnto(t){const s=this.dot(t),n=t.squaredMagnitude;if(n===0)throw new Error("Cannot project onto a zero-length vector.");const i=s/n;return t.scale(i)}midpoint(t){return new h((this.x+t.x)/2,(this.y+t.y)/2,(this.z+t.z)/2)}}const j=180/Math.PI,D=Math.PI/180,p=X(Array.from({length:256},(e,t)=>t));function S(e){return e*e*e*(e*(e*6-15)+10)}function b(e,t,s){const n=e&15,i=n<8?t:s,r=n<4?s:n===12||n===14?t:0;return(n&1?-i:i)+(n&2?-r:r)}function q(e,t){const s=Math.floor(e)&255,n=Math.floor(t)&255;e-=Math.floor(e),t-=Math.floor(t);const i=S(e),r=S(t),x=p[s]+n,y=p[s+1]+n;return L(L(b(p[x],e,t),b(p[y],e-1,t),i),L(b(p[x+1],e,t-1),b(p[y+1],e-1,t-1),i),r)}function l(e,t,s){return Math.min(Math.max(e,t),s)}function H(e,t,s){return e<t||e>s?null:(e-t)/(s-t)}function L(e,t,s){return e+(t-e)*s}function F(e,t,s){return e+C(t,e)*s}function C(e,t){return(t-e+180)%360-180}function G(e,t){return(e%t+t)%t}function M(e,t){return e+Math.random()*(t-e)}function R(e,t){return Math.floor(M(e,t))}function U(e){return e[R(0,e.length)]}function Y(){return Math.random()<.5}function $(){return Y()?1:-1}function k(e,t=[0,0]){const s=M(0,Math.PI*2),n=e*Math.sqrt(Math.random()),[i,r]=t;return[i+Math.cos(s)*n,r+Math.sin(s)*n]}function N(e,t=[0,0]){const s=M(0,Math.PI*2),[n,i]=t;return[n+Math.cos(s)*e,i+Math.sin(s)*e]}function J(e=0,t=360,s=100,n=50){const i=M(e,t);return o.fromHSL(i,s,n)}function X(e){const t=e.slice();for(let s=t.length-1;s>0;s--){const n=R(0,s+1);[t[s],t[n]]=[t[n],t[s]]}return t}function K(e){for(let t=e.length-1;t>0;t--){const s=R(0,t+1);[e[t],e[s]]=[e[s],e[t]]}return e}function I(e){return new Promise(t=>setTimeout(t,e))}function Q(e,t){let s=null;return(...i)=>{s!==null&&clearTimeout(s),s=setTimeout(()=>e(...i),t)}}const v=Object.freeze(Object.defineProperty({__proto__:null,DEG_TO_RAD:D,RAD_TO_DEG:j,angleDifference:C,clamp:l,debounce:Q,lerp:L,lerpAngle:F,mod:G,normalizeWithinRange:H,perlinNoise:q,random:M,randomBool:Y,randomChoice:U,randomColorByHue:J,randomInCircle:k,randomInt:R,randomOnCircle:N,randomSign:$,shuffle:X,shuffleInPlace:K,sleep:I},Symbol.toStringTag,{value:"Module"}));var O=(e=>(e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Gamma=12]="Gamma",e))(O||{});const g=class g{constructor(t,s,n){this.red=t,this.green=s,this.blue=n}blendChannel(t,s,n){return l(Math.round(n(t/255,s/255)*255),0,255)}blend(t,s=5){const n=g.blendFuncs[s];return new g(this.blendChannel(this.red,t.red,n),this.blendChannel(this.green,t.green,n),this.blendChannel(this.blue,t.blue,n))}toHSL(){const t=this.red/255,s=this.green/255,n=this.blue/255,i=Math.max(t,s,n),r=Math.min(t,s,n);let x=(i+r)/2,y=x;const z=x;if(i===r)x=y=0;else{const a=i-r;switch(y=z>.5?a/(2-i-r):a/(i+r),i){case t:x=(s-n)/a+(s<n?6:0);break;case s:x=(n-t)/a+2;break;case n:x=(t-s)/a+4;break}x/=6}return[Math.round(x*360),Math.round(y*100),Math.round(z*100)]}complementary(){const[t,s,n]=this.toHSL();return g.fromHSL((t+180)%360,s,n)}intensity(t){return new g(l(Math.round(this.red*t),0,255),l(Math.round(this.green*t),0,255),l(Math.round(this.blue*t),0,255))}toString(){return`rgb(${this.red}, ${this.green}, ${this.blue})`}toInt(){return(this.red&255)<<16|(this.green&255)<<8|this.blue&255}static fromInt(t){return t=l(t,0,16777215),new g(t>>16&255,t>>8&255,t&255)}static fromHex(t){const s=t.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);if(!s)throw new Error(`Invalid hex color: ${t}`);return new g(parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16))}static fromRGB(t,s,n){return t=l(t,0,255),s=l(s,0,255),n=l(n,0,255),new g(t,s,n)}static fromHSL(t,s,n){t=l(t,0,360),s=l(s,0,100),n=l(n,0,100),t/=360,s/=100,n/=100;let i,r,x;if(s===0)i=r=x=n;else{const y=(d,w,f)=>(f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?d+(w-d)*6*f:f<.5?w:f<.6666666666666666?d+(w-d)*(.6666666666666666-f)*6:d),z=n<.5?n*(1+s):n+s-n*s,a=2*n-z;i=y(a,z,t+1/3),r=y(a,z,t),x=y(a,z,t-1/3)}return new g(Math.round(i*255),Math.round(r*255),Math.round(x*255))}};c(g,"blendFuncs",{0:(t,s)=>s,1:(t,s)=>t*s,2:(t,s)=>t+s-t*s,3:(t,s)=>t<.5?2*t*s:1-2*(1-t)*(1-s),4:(t,s)=>Math.min(t,s),5:(t,s)=>Math.max(t,s),6:(t,s)=>s===1?1:Math.min(1,t/(1-s)),7:(t,s)=>s===0?0:1-Math.min(1,(1-t)/s),8:(t,s)=>s<.5?2*t*s:1-2*(1-t)*(1-s),9:(t,s)=>s<.5?2*t*s+t*t*(1-2*s):Math.sqrt(t)*(2*s-1)+2*t*(1-s),10:(t,s)=>Math.abs(t-s),11:(t,s)=>t+s-2*t*s,12:(t,s)=>((t**2.2+s**2.2)/2)**(1/2.2)});let o=g;const B={red:new o(255,0,0),green:new o(0,255,0),blue:new o(0,0,255),orange:new o(255,165,0),yellow:new o(255,255,0),purple:new o(128,0,128),pink:new o(255,20,147),white:new o(255,255,255),black:new o(0,0,0),gray:new o(128,128,128),brown:new o(165,42,42),cyan:new o(0,255,255),darkGreen:new o(0,128,0),darkBlue:new o(0,0,128),darkOrange:new o(255,140,0),darkYellow:new o(128,128,0),darkPurple:new o(75,0,130),darkPink:new o(255,105,180),darkGray:new o(64,64,64),darkBrown:new o(139,69,19),darkCyan:new o(0,128,128)};class A{constructor(t,s){c(this,"_location");c(this,"color");c(this,"update");this._location=t,this.color=s}get location(){return new h(this._location.x,this._location.y,1-this._location.z)}get locationScaled(){return this.location.mult(new h(1,1,1.74))}get locationOriginCenter(){return this.location.sub(new h(.5,.5,.5))}get locationOriginCenterScaled(){return this.locationOriginCenter.mult(new h(1,1,1.74))}get locationOriginCenterBottom(){return this.location.sub(new h(.5,.5,0))}get locationOriginCenterBottomScaled(){return this.locationOriginCenterBottom.mult(new h(1,1,1.74))}toDto(){return{location:this._location.asTuple,color:this.color.toInt()}}static fromDto(t){return new A(h.fromTuple(t.location),o.fromInt(t.color))}}class u{constructor(){}isPointInside(t,s,n){return!1}}class W extends u{constructor(t,s,n){super(),this.radius=t,this.height=s,this.center=n}isPointInside(t,s,n){const i=Math.sqrt((t-this.center.x)**2+(s-this.center.y)**2),x=this.radius/this.height*(n-this.center.z)+this.radius;return i<=x&&n>=this.center.z-this.height/2&&n<=this.center.z+this.height/2}}class _ extends u{constructor(t,s,n,i){super(),this.nearRadius=t,this.farRadius=s,this.height=n,this.center=i}isPointInside(t,s,n){const i=Math.sqrt((t-this.center.x)**2+(s-this.center.y)**2),x=(this.farRadius-this.nearRadius)/this.height*(n-this.center.z)+this.nearRadius;return i<=x&&n>=this.center.z-this.height/2&&n<=this.center.z+this.height/2}}class V extends u{constructor(t,s){super(),this.sideLength=t,this.center=s}isPointInside(t,s,n){const i=this.sideLength/2;return Math.abs(t-this.center.x)<=i&&Math.abs(s-this.center.y)<=i&&Math.abs(n-this.center.z)<=i}}class t0 extends u{constructor(t,s,n,i){super(),this.lengthX=t,this.lengthY=s,this.lengthZ=n,this.center=i}isPointInside(t,s,n){const i=this.lengthX/2,r=this.lengthY/2,x=this.lengthZ/2;return t>=this.center.x-i&&t<=this.center.x+i&&s>=this.center.y-r&&s<=this.center.y+r&&n>=this.center.z-x&&n<=this.center.z+x}}class s0 extends u{constructor(t,s,n){super(),this.radius=t,this.height=s,this.center=n}isPointInside(t,s,n){return Math.sqrt((t-this.center.x)**2+(s-this.center.y)**2)<=this.radius&&n>=this.center.z-this.height/2&&n<=this.center.z+this.height/2}}class n0 extends u{constructor(t,s,n,i){super(),this.majorRadius=t,this.minorRadius=s,this.height=n,this.center=i}isPointInside(t,s,n){return Math.sqrt((t-this.center.x)**2+(s-this.center.y)**2)<=this.majorRadius&&n>=this.center.z-this.height/2&&n<=this.center.z+this.height/2&&Math.sqrt((t-this.center.x)**2/this.majorRadius**2+(s-this.center.y)**2/this.minorRadius**2)<=1}}class e0 extends u{constructor(t,s,n,i){super(),this.semiAxisX=t,this.semiAxisY=s,this.semiAxisZ=n,this.center=i}isPointInside(t,s,n){const i=(t-this.center.x)/this.semiAxisX,r=(s-this.center.y)/this.semiAxisY,x=(n-this.center.z)/this.semiAxisZ;return i**2+r**2+x**2<=1}}class i0 extends u{constructor(t,s,n,i,r,x,y){super(),this.near=t,this.far=s,this.left=n,this.right=i,this.top=r,this.bottom=x,this.center=y}isPointInside(t,s,n){const i=this.near/2,r=this.far/2;return t>=this.center.x-i&&t<=this.center.x+i&&s>=this.center.y-i&&s<=this.center.y+i&&n>=this.center.z-i&&n<=this.center.z+r}}class r0 extends u{constructor(t,s,n){super(),this.sideLength=t,this.height=s,this.center=n}isPointInside(t,s,n){const i=this.sideLength/2,r=this.center.z+this.height/2,x=this.center.z-this.height/2;this.center.x+i,this.center.y+i;const y=Math.abs(t-this.center.x),z=Math.abs(s-this.center.y);return n>=x&&n<=r&&y<=i&&z<=i&&(y+z)*Math.sqrt(3)/2<=i}}class x0 extends u{constructor(t,s){super(),this.edgeLength=t,this.center=s}isPointInside(t,s,n){const i=this.edgeLength/2,r=this.center.z+i,x=this.center.z-i;this.center.x+i,this.center.y+i;const y=Math.abs(t-this.center.x),z=Math.abs(s-this.center.y);return n>=x&&n<=r&&y+z+Math.abs(n-this.center.z)<=i}}class h0 extends u{constructor(t,s,n){super(),this.baseLength=t,this.height=s,this.center=n}isPointInside(t,s,n){const i=this.baseLength/2,r=this.center.z+this.height/2,x=this.center.z-this.height/2,y=this.center.x+i,z=this.center.y+i;return!(n>r||n<x||t>y||t<this.center.x-i||s>z||s<this.center.y-i)}}class y0 extends u{constructor(t,s,n,i){super(),this.lengthX=t,this.lengthY=s,this.lengthZ=n,this.center=i}isPointInside(t,s,n){const i=this.lengthX/2,r=this.lengthY/2,x=this.lengthZ/2;return t>=this.center.x-i&&t<=this.center.x+i&&s>=this.center.y-r&&s<=this.center.y+r&&n>=this.center.z-x&&n<=this.center.z+x}}class z0 extends u{constructor(t,s){super(),this.radius=t,this.center=s}isPointInside(t,s,n){return Math.sqrt((t-this.center.x)**2+(s-this.center.y)**2+(n-this.center.z)**2)<=this.radius}}class o0 extends u{constructor(t,s,n){super(),this.majorRadius=t,this.minorRadius=s,this.center=n}isPointInside(t,s,n){const i=Math.sqrt((t-this.center.x)**2+(s-this.center.y)**2);return i>=this.majorRadius-this.minorRadius&&i<=this.majorRadius+this.minorRadius&&Math.abs(n-this.center.z)<=this.minorRadius}}class a0 extends u{constructor(t,s,n){super(),this.baseLength=t,this.height=s,this.center=n}isPointInside(t,s,n){const i=this.baseLength/2,r=this.center.z+this.height/2,x=this.center.z-this.height/2,y=this.center.x+i,z=this.center.y+i;return n>=x&&n<=r&&t>=this.center.x-i&&t<=y&&s>=this.center.y-i&&s<=z}}const c0=Object.freeze(Object.defineProperty({__proto__:null,Cone:W,ConeFrustum:_,Cube:V,Cuboid:t0,Cylinder:s0,CylinderWithEllipticalBase:n0,Ellipsoid:e0,Frustum:i0,HexagonalPrism:r0,Octahedron:x0,Pyramid:h0,RectangularPrism:y0,Shape:u,Sphere:z0,Torus:o0,TriangularPyramid:a0},Symbol.toStringTag,{value:"Module"})),u0=[{x:.42,y:.46,z:0},{x:.37,y:.54,z:.02},{x:.49,y:.41,z:.03},{x:.54,y:.42,z:.03},{x:.39,y:.39,z:.04},{x:.43,y:.39,z:.04},{x:.58,y:.35,z:.06},{x:.37,y:.43,z:.06},{x:.6,y:.52,z:.06},{x:.36,y:.55,z:.06},{x:.58,y:.64,z:.06},{x:.52,y:.38,z:.07},{x:.61,y:.36,z:.08},{x:.6,y:.41,z:.08},{x:.4,y:.71,z:.08},{x:.49,y:.75,z:.08},{x:.36,y:.42,z:.09},{x:.61,y:.55,z:.09},{x:.51,y:.65,z:.09},{x:.34,y:.7,z:.09},{x:.52,y:.36,z:.1},{x:.69,y:.48,z:.1},{x:.31,y:.49,z:.1},{x:.66,y:.54,z:.1},{x:.33,y:.7,z:.1},{x:.36,y:.33,z:.11},{x:.58,y:.36,z:.11},{x:.31,y:.43,z:.12},{x:.33,y:.43,z:.12},{x:.3,y:.75,z:.12},{x:.66,y:.41,z:.13},{x:.42,y:.75,z:.13},{x:.67,y:.36,z:.14},{x:.55,y:.65,z:.14},{x:.6,y:.67,z:.14},{x:.4,y:.38,z:.15},{x:.34,y:.41,z:.15},{x:.54,y:.46,z:.15},{x:.66,y:.46,z:.15},{x:.64,y:.58,z:.15},{x:.34,y:.49,z:.16},{x:.34,y:.67,z:.16},{x:.4,y:.38,z:.17},{x:.7,y:.58,z:.17},{x:.34,y:.8,z:.17},{x:.66,y:.32,z:.18},{x:.34,y:.38,z:.18},{x:.49,y:.43,z:.18},{x:.34,y:.67,z:.18},{x:.58,y:.77,z:.18},{x:.34,y:.81,z:.18},{x:.52,y:.41,z:.19},{x:.45,y:.43,z:.19},{x:.63,y:.58,z:.19},{x:.58,y:.39,z:.2},{x:.25,y:.43,z:.2},{x:.28,y:.48,z:.2},{x:.7,y:.48,z:.2},{x:.66,y:.59,z:.2},{x:.45,y:.71,z:.2},{x:.67,y:.32,z:.21},{x:.28,y:.58,z:.21},{x:.58,y:.7,z:.21},{x:.54,y:.74,z:.21},{x:.34,y:.38,z:.22},{x:.61,y:.38,z:.22},{x:.66,y:.52,z:.22},{x:.28,y:.58,z:.22},{x:.64,y:.59,z:.22},{x:.78,y:.64,z:.22},{x:.63,y:.68,z:.22},{x:.42,y:.74,z:.22},{x:.4,y:.75,z:.22},{x:.43,y:.75,z:.22},{x:.24,y:.36,z:.23},{x:.7,y:.32,z:.24},{x:.55,y:.42,z:.24},{x:.54,y:.45,z:.24},{x:.25,y:.52,z:.24},{x:.64,y:.55,z:.24},{x:.39,y:.78,z:.24},{x:.43,y:.32,z:.25},{x:.73,y:.55,z:.25},{x:.55,y:.75,z:.25},{x:.67,y:.36,z:.26},{x:.31,y:.55,z:.26},{x:.28,y:.35,z:.27},{x:.4,y:.74,z:.27},{x:.63,y:.29,z:.28},{x:.64,y:.32,z:.28},{x:.31,y:.39,z:.28},{x:.7,y:.55,z:.28},{x:.25,y:.58,z:.28},{x:.55,y:.77,z:.28},{x:.49,y:.29,z:.29},{x:.73,y:.46,z:.29},{x:.31,y:.55,z:.29},{x:.25,y:.59,z:.29},{x:.6,y:.8,z:.3},{x:.34,y:.32,z:.31},{x:.66,y:.36,z:.31},{x:.36,y:.77,z:.31},{x:.45,y:.78,z:.31},{x:.4,y:.84,z:.31},{x:.36,y:.32,z:.32},{x:.28,y:.52,z:.32},{x:.57,y:.72,z:.32},{x:.43,y:.3,z:.33},{x:.7,y:.33,z:.33},{x:.76,y:.49,z:.33},{x:.25,y:.52,z:.33},{x:.27,y:.57,z:.33},{x:.75,y:.57,z:.33},{x:.69,y:.58,z:.33},{x:.7,y:.58,z:.33},{x:.81,y:.61,z:.33},{x:.51,y:.83,z:.33},{x:.49,y:.26,z:.34},{x:.31,y:.43,z:.34},{x:.3,y:.46,z:.34},{x:.78,y:.49,z:.34},{x:.69,y:.61,z:.34},{x:.4,y:.75,z:.34},{x:.64,y:.29,z:.35},{x:.37,y:.38,z:.35},{x:.22,y:.43,z:.35},{x:.25,y:.48,z:.35},{x:.22,y:.57,z:.35},{x:.81,y:.57,z:.35},{x:.72,y:.65,z:.35},{x:.34,y:.7,z:.35},{x:.49,y:.7,z:.35},{x:.34,y:.77,z:.35},{x:.55,y:.77,z:.35},{x:.66,y:.77,z:.35},{x:.54,y:.26,z:.36},{x:.46,y:.32,z:.36},{x:.67,y:.57,z:.36},{x:.28,y:.58,z:.36},{x:.37,y:.67,z:.36},{x:.52,y:.75,z:.36},{x:.75,y:.35,z:.37},{x:.3,y:.51,z:.37},{x:.66,y:.29,z:.38},{x:.43,y:.41,z:.38},{x:.19,y:.42,z:.38},{x:.3,y:.61,z:.38},{x:.72,y:.65,z:.38},{x:.28,y:.75,z:.38},{x:.69,y:.77,z:.38},{x:.52,y:.83,z:.38},{x:.33,y:.43,z:.39},{x:.51,y:.26,z:.4},{x:.64,y:.38,z:.4},{x:.28,y:.43,z:.4},{x:.43,y:.62,z:.4},{x:.61,y:.67,z:.4},{x:.28,y:.7,z:.4},{x:.43,y:.72,z:.4},{x:.43,y:.72,z:.4},{x:.46,y:.72,z:.4},{x:.61,y:.74,z:.4},{x:.82,y:.58,z:.41},{x:.61,y:.84,z:.41},{x:.57,y:.32,z:.42},{x:.49,y:.35,z:.42},{x:.22,y:.42,z:.42},{x:.85,y:.43,z:.42},{x:.42,y:.78,z:.42},{x:.7,y:.26,z:.43},{x:.37,y:.17,z:.44},{x:.49,y:.25,z:.44},{x:.22,y:.43,z:.44},{x:.67,y:.43,z:.44},{x:.66,y:.65,z:.44},{x:.19,y:.68,z:.44},{x:.7,y:.71,z:.44},{x:.6,y:.84,z:.45},{x:.7,y:.3,z:.46},{x:.81,y:.43,z:.46},{x:.39,y:.23,z:.47},{x:.22,y:.39,z:.47},{x:.78,y:.42,z:.47},{x:.52,y:.43,z:.47},{x:.79,y:.61,z:.47},{x:.21,y:.7,z:.47},{x:.37,y:.77,z:.47},{x:.61,y:.78,z:.47},{x:.34,y:.29,z:.48},{x:.55,y:.41,z:.48},{x:.13,y:.45,z:.48},{x:.84,y:.62,z:.48},{x:.78,y:.48,z:.49},{x:.18,y:.58,z:.49},{x:.33,y:.83,z:.49},{x:.7,y:.32,z:.5},{x:.13,y:.48,z:.5},{x:.79,y:.54,z:.5},{x:.22,y:.65,z:.5},{x:.66,y:.74,z:.5},{x:.6,y:.84,z:.5},{x:.37,y:.2,z:.51},{x:.54,y:.3,z:.51},{x:.3,y:.43,z:.51},{x:.84,y:.49,z:.51},{x:.28,y:.65,z:.51},{x:.88,y:.67,z:.51},{x:.34,y:.7,z:.51},{x:.49,y:.78,z:.51},{x:.42,y:.83,z:.51},{x:.78,y:.32,z:.52},{x:.67,y:.58,z:.52},{x:.72,y:.58,z:.52},{x:.7,y:.51,z:.53},{x:.31,y:.55,z:.53},{x:.31,y:.61,z:.53},{x:.63,y:.72,z:.53},{x:.28,y:.75,z:.53},{x:.51,y:.8,z:.53},{x:.6,y:.25,z:.54},{x:.58,y:.33,z:.54},{x:.31,y:.42,z:.54},{x:.85,y:.48,z:.54},{x:.64,y:.65,z:.54},{x:.69,y:.86,z:.54},{x:.42,y:.23,z:.55},{x:.72,y:.41,z:.55},{x:.19,y:.61,z:.55},{x:.58,y:.7,z:.55},{x:.51,y:.88,z:.55},{x:.79,y:.45,z:.56},{x:.34,y:.68,z:.56},{x:.76,y:.3,z:.57},{x:.85,y:.3,z:.57},{x:.22,y:.55,z:.57},{x:.6,y:.8,z:.57},{x:.4,y:.84,z:.57},{x:.45,y:.28,z:.58},{x:.76,y:.38,z:.58},{x:.31,y:.43,z:.58},{x:.84,y:.64,z:.58},{x:.55,y:.67,z:.58},{x:.39,y:.23,z:.59},{x:.21,y:.26,z:.59},{x:.55,y:.29,z:.59},{x:.76,y:.35,z:.59},{x:.82,y:.41,z:.59},{x:.84,y:.43,z:.59},{x:.78,y:.62,z:.59},{x:.85,y:.28,z:.6},{x:.37,y:.43,z:.6},{x:.25,y:.77,z:.6},{x:.7,y:.78,z:.6},{x:.72,y:.67,z:.61},{x:.66,y:.77,z:.61},{x:.42,y:.78,z:.61},{x:.61,y:.87,z:.61},{x:.6,y:.19,z:.62},{x:.55,y:.26,z:.62},{x:.84,y:.46,z:.62},{x:.22,y:.58,z:.62},{x:.37,y:.77,z:.62},{x:.37,y:.23,z:.63},{x:.79,y:.26,z:.63},{x:.33,y:.33,z:.63},{x:.34,y:.33,z:.63},{x:.82,y:.36,z:.63},{x:.36,y:.45,z:.63},{x:.42,y:.45,z:.63},{x:.3,y:.49,z:.63},{x:.72,y:.7,z:.63},{x:.76,y:.71,z:.63},{x:.33,y:.72,z:.63},{x:.63,y:.72,z:.63},{x:.42,y:.1,z:.64},{x:.45,y:.17,z:.64},{x:.24,y:.2,z:.64},{x:.36,y:.46,z:.64},{x:.27,y:.39,z:.65},{x:.73,y:.42,z:.65},{x:.22,y:.59,z:.65},{x:.67,y:.7,z:.65},{x:.54,y:.72,z:.65},{x:.66,y:.2,z:.66},{x:.31,y:.29,z:.66},{x:.64,y:.29,z:.66},{x:.97,y:.42,z:.66},{x:.75,y:.45,z:.66},{x:.57,y:.81,z:.66},{x:.45,y:.12,z:.67},{x:.67,y:.12,z:.67},{x:.31,y:.3,z:.67},{x:.34,y:.35,z:.67},{x:.82,y:.42,z:.67},{x:.61,y:.45,z:.67},{x:.81,y:.48,z:.67},{x:.33,y:.55,z:.67},{x:.33,y:.71,z:.67},{x:.33,y:.78,z:.67},{x:.51,y:.8,z:.67},{x:.87,y:.8,z:.67},{x:.42,y:.86,z:.67},{x:.82,y:.28,z:.68},{x:.3,y:.45,z:.68},{x:.52,y:.78,z:.68},{x:.4,y:.9,z:.68},{x:.39,y:.16,z:.69},{x:.33,y:.19,z:.69},{x:.33,y:.19,z:.69},{x:.25,y:.41,z:.69},{x:.79,y:.41,z:.69},{x:.75,y:.46,z:.69},{x:.87,y:.46,z:.69},{x:.33,y:.48,z:.69},{x:.39,y:.65,z:.69},{x:.39,y:.75,z:.69},{x:.39,y:.81,z:.69},{x:.34,y:.62,z:.7},{x:.46,y:.14,z:.71},{x:.67,y:.16,z:.71},{x:.87,y:.46,z:.71},{x:.03,y:.7,z:.71},{x:.55,y:.84,z:.71},{x:.54,y:.9,z:.71},{x:.28,y:.16,z:.72},{x:.55,y:.2,z:.72},{x:.63,y:.22,z:.72},{x:.76,y:.26,z:.72},{x:.85,y:.74,z:.72},{x:.4,y:.94,z:.72},{x:.55,y:.2,z:.73},{x:.64,y:.23,z:.73},{x:.85,y:.29,z:.73},{x:.75,y:.33,z:.73},{x:.22,y:.41,z:.73},{x:.76,y:.49,z:.73},{x:.91,y:.62,z:.73},{x:.91,y:.72,z:.73},{x:.45,y:.94,z:.73},{x:.54,y:.12,z:.74},{x:.81,y:.17,z:.74},{x:.73,y:.32,z:.74},{x:.33,y:.7,z:.74},{x:.25,y:.75,z:.74},{x:.55,y:.81,z:.74},{x:.55,y:.96,z:.74},{x:.91,y:.19,z:.75},{x:.73,y:.29,z:.75},{x:.55,y:.33,z:.75},{x:.67,y:.36,z:.75},{x:.28,y:.22,z:.76},{x:.82,y:.26,z:.76},{x:.24,y:.32,z:.76},{x:.27,y:.32,z:.76},{x:.24,y:.41,z:.76},{x:.93,y:.45,z:.76},{x:.39,y:.62,z:.76},{x:.9,y:.62,z:.76},{x:.3,y:.72,z:.76},{x:.69,y:.83,z:.76},{x:.4,y:.26,z:.77},{x:.49,y:.29,z:.77},{x:.18,y:.39,z:.77},{x:.73,y:.48,z:.77},{x:.31,y:.65,z:.77},{x:.27,y:.68,z:.77},{x:.48,y:.74,z:.77},{x:.63,y:.75,z:.77},{x:.67,y:.87,z:.77},{x:.39,y:.97,z:.77},{x:.3,y:.13,z:.78},{x:.61,y:.13,z:.78},{x:.43,y:.14,z:.78},{x:.34,y:.22,z:.78},{x:.15,y:.29,z:.78},{x:.22,y:.35,z:.78},{x:.49,y:.35,z:.78},{x:.9,y:.49,z:.78},{x:.6,y:.75,z:.78},{x:.33,y:.13,z:.79},{x:.42,y:.2,z:.79},{x:.49,y:.26,z:.79},{x:.16,y:.35,z:.79},{x:.55,y:.72,z:.79},{x:.93,y:.88,z:.79},{x:.51,y:.97,z:.79},{x:.49,y:.19,z:.8},{x:.96,y:.22,z:.8},{x:.16,y:.49,z:.8},{x:.79,y:.64,z:.8},{x:.88,y:.64,z:.8},{x:.79,y:.67,z:.8},{x:.97,y:.12,z:.81},{x:.57,y:.14,z:.81},{x:.66,y:.14,z:.81},{x:.64,y:.25,z:.81},{x:.93,y:.39,z:.81},{x:.1,y:.41,z:.81},{x:.18,y:.75,z:.81},{x:.24,y:.78,z:.81},{x:.94,y:.81,z:.81},{x:.13,y:.87,z:.81},{x:.94,y:.2,z:.82},{x:.63,y:.26,z:.82},{x:.18,y:.33,z:.82},{x:.81,y:.71,z:.82},{x:.94,y:.71,z:.82},{x:.63,y:.83,z:.82},{x:.64,y:0,z:.83},{x:.58,y:.03,z:.83},{x:.54,y:.1,z:.83},{x:.87,y:.13,z:.83},{x:.61,y:.25,z:.83},{x:.61,y:.3,z:.83},{x:.3,y:.32,z:.83},{x:.27,y:.38,z:.83},{x:1,y:.39,z:.83},{x:.31,y:.43,z:.83},{x:.09,y:.46,z:.83},{x:.12,y:.48,z:.83},{x:.87,y:.49,z:.83},{x:.85,y:.61,z:.83},{x:.91,y:.62,z:.83},{x:.4,y:.96,z:.83},{x:.85,y:.13,z:.84},{x:.39,y:.17,z:.84},{x:.49,y:.22,z:.84},{x:.63,y:.28,z:.84},{x:.01,y:.35,z:.84},{x:.9,y:.87,z:.84},{x:.67,y:.09,z:.85},{x:.34,y:.12,z:.85},{x:.52,y:.14,z:.85},{x:.51,y:.2,z:.85},{x:.58,y:.22,z:.85},{x:.19,y:.29,z:.85},{x:.06,y:.49,z:.85},{x:.82,y:.52,z:.85},{x:.13,y:.8,z:.85},{x:.72,y:.83,z:.85},{x:.25,y:.84,z:.85},{x:.46,y:.13,z:.86},{x:.64,y:.14,z:.86},{x:.18,y:.26,z:.86},{x:.64,y:.93,z:.86},{x:.37,y:.96,z:.86},{x:.27,y:.09,z:.87},{x:.58,y:.16,z:.87},{x:.87,y:.16,z:.87},{x:.16,y:.19,z:.87},{x:.27,y:.3,z:.87},{x:.03,y:.49,z:.87},{x:.96,y:.49,z:.87},{x:.19,y:.87,z:.87},{x:.63,y:.07,z:.88},{x:.46,y:.1,z:.88},{x:.58,y:.14,z:.88},{x:.9,y:.86,z:.88},{x:.72,y:.9,z:.88},{x:.16,y:.16,z:.89},{x:.09,y:.77,z:.89},{x:.54,y:0,z:.9},{x:.58,y:.13,z:.9},{x:.91,y:.16,z:.9},{x:.67,y:.17,z:.9},{x:.87,y:.35,z:.9},{x:.7,y:.38,z:.9},{x:.88,y:.52,z:.9},{x:.85,y:.83,z:.9},{x:.69,y:.88,z:.9},{x:.63,y:.93,z:.9},{x:.4,y:1,z:.9},{x:.55,y:.12,z:.91},{x:.03,y:.35,z:.91},{x:.1,y:.75,z:.91},{x:.58,y:.78,z:.91},{x:.54,y:.91,z:.91},{x:.24,y:.07,z:.92},{x:.24,y:.1,z:.92},{x:.96,y:.51,z:.92},{x:0,y:.57,z:.92},{x:.01,y:.62,z:.92},{x:.78,y:.75,z:.92},{x:.58,y:.84,z:.92},{x:.49,y:.94,z:.92},{x:.82,y:.33,z:.93},{x:.09,y:.39,z:.93},{x:.87,y:.29,z:.94},{x:.03,y:.45,z:.94},{x:.1,y:.58,z:.94},{x:.52,y:.84,z:.94},{x:.9,y:.23,z:.95},{x:.03,y:.71,z:.95},{x:.52,y:.09,z:.96},{x:.51,y:.13,z:.97},{x:.66,y:.87,z:.97},{x:.45,y:.2,z:.98},{x:.07,y:.7,z:.98},{x:.15,y:.72,z:1},{x:.19,y:.74,z:1}];class d0{constructor(){c(this,"audioRunner",null);c(this,"setup");c(this,"update");c(this,"lights",u0.map(t=>new A(h.fromObject(t),new o(0,0,0))));c(this,"time",null);c(this,"iteration",0);c(this,"running",!1)}async run(){var t,s,n;for((!this.running||this.time===null)&&(this.time=0,this.running=!0,(t=this.setup)==null||t.call(this));this.running;){this.time===null&&(this.time=0,(s=this.setup)==null||s.call(this));const i=1e3/this.fps;(n=this.update)==null||n.call(this,this.time,i,this.iteration),this.lightUpdate(this.time,i,this.iteration),this.draw(),this.iteration++,this.time+=i,await I(i)}}reset(){var t;this.iteration=0,this.time=null;for(const s of this.lights)s.color=new o(0,0,0);this.draw(),(t=this.audioRunner)==null||t.audioReset()}pause(){var t;this.running=!1,(t=this.audioRunner)==null||t.audioPause()}play(){var t;this.running=!0,this.run(),(t=this.audioRunner)==null||t.audioPlay()}async step(){var s,n;this.running=!0,this.run(),this.running=!1,(s=this.audioRunner)==null||s.audioPlay();const t=1e3/this.fps;await I(t),(n=this.audioRunner)==null||n.audioPause()}lightUpdate(t,s,n){var i;for(const r of this.lights){const x=(i=r.update)==null?void 0:i.call(r,t,s,n);x&&(r.color=x)}}}class l0 extends d0{constructor(){super(...arguments);c(this,"_fps",30)}set fps(s){this._fps=s,postMessage({type:"fps",data:{fps:s}})}get fps(){return this._fps}draw(){postMessage({type:"update",data:{lights:this.lights.map(s=>s.toDto())}})}}var m=(e=>(e.Update="update",e.Play="play",e.Pause="pause",e.Reset="reset",e.Step="step",e.Ready="ready",e.Confirmation="confirmation",e.Code="code",e.Fps="fps",e.AudioTime="audioTime",e.AudioEnded="audioEnded",e.AudioPause="audioPause",e.AudioPlay="audioPlay",e.AudioReset="audioReset",e.AudioUrl="audioUrl",e.AudioLoaded="audioLoaded",e))(m||{});class f0{constructor(t,s=!0){c(this,"loader",null);c(this,"audioTime");c(this,"audioEnded");this.loader=this.audioLoader(t,s)}}class g0 extends f0{constructor(s,n){super(s,n);c(this,"audioMessageListener",s=>{var n,i;s.data.type===m.AudioTime?(n=this.audioTime)==null||n.call(this,s.data.data.time):s.data.type===m.AudioEnded&&((i=this.audioEnded)==null||i.call(this))});addEventListener("message",this.audioMessageListener)}audioLoader(s,n=!0){return P(m.AudioUrl,{url:s,loop:n}),new Promise(i=>{const r=x=>{x.data.type===m.AudioLoaded&&(i(),removeEventListener("message",r))};addEventListener("message",r)})}audioPause(){P(m.AudioPause,{})}audioPlay(){P(m.AudioPlay,{})}audioReset(){P(m.AudioReset,{})}}function P(e,t){const s=Math.random().toString(36).slice(2);postMessage(t?{type:e,data:{...t,messageId:s}}:{type:e,data:{messageId:s}})}const m0=new l0;exports.BlendMode=O;exports.Color=o;exports.Light=A;exports.LocalAudioRunner=g0;exports.Shapes=c0;exports.Utils=v;exports.Vector3=h;exports.colors=B;exports.runner=m0;
